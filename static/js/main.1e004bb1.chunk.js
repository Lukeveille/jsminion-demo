(this.webpackJsonpjsminion=this.webpackJsonpjsminion||[]).push([[0],[,,,,,,function(e){e.exports=JSON.parse('{"victory":[{"name":"Estate","cost":2,"victory":1,"type":"Victory"},{"name":"Duchy","cost":5,"victory":3,"type":"Victory"},{"name":"Province","cost":8,"victory":6,"type":"Victory"},{"name":"Curse","cost":0,"victory":-1,"type":"Victory"}],"treasure":[{"name":"Copper","cost":0,"treasure":1,"type":"Treasure"},{"name":"Silver","cost":3,"treasure":2,"type":"Treasure"},{"name":"Gold","cost":6,"treasure":3,"type":"Treasure"}],"action":[{"name":"Village","cost":3,"actions":2,"cards":1,"type":"Action"},{"name":"Smithy","cost":4,"cards":3,"type":"Action"},{"name":"Market","cost":5,"actions":1,"cards":1,"buys":1,"treasure":1,"type":"Action"},{"name":"Festival","cost":5,"actions":2,"buys":1,"treasures":2,"type":"Action"},{"name":"Laboratory","cost":5,"cards":2,"actions":1,"type":"Action"},{"name":"Chapel","cost":2,"instructions":"Trash up to 4 cards from your hand.","discardTrash":"trash 4|up-to","type":"Action"},{"name":"Cellar","cost":2,"actions":1,"instructions":"Discard any number of cards, then draw that many.","discardTrash":"discard any draw","type":"Action"},{"name":"Remodel","cost":4,"instructions":"Trash a card from your hand. Gain a card costing up to coin-2 more than it.","discardTrash":"trash 1 supply","supply":"discardTrash 2","type":"Action"},{"name":"Mine","cost":5,"instructions":"You may trash a Treasure from your hand. Gain a Treasure to your hand costing up to coin-3 more than it.","discardTrash":"trash 1 supply Treasure","supply":"discardTrash 3 hand","type":"Action"},{"name":"Moneylender","cost":4,"treasure":3,"instructions":"You may trash a Copper from your hand for +coin-3","discardTrash":"trash 1 auto Copper","type":"Action","hidden":"treasure"},{"name":"Vassal","cost":3,"treasure":2,"instructions":"Discard the top card of your deck. If it\'s an Action card, you may play it.","discardTrash":"discard 1|deck auto","deck":"Action [0] modal","type":"Action"},{"name":"Workshop","cost":3,"instructions":"Gain a card costing up to coin-4","supply":"gain 4","type":"Action"},{"name":"Harbinger","cost":3,"cards":1,"actions":1,"instructions":"Look through your discard pile. You may put a card from it onto your deck.","discard":"modal 1|deck","type":"Action"},{"name":"Merchant","cost":3,"cards":1,"actions":1,"instructions":"The first time you play a Silver this turn, +coin-1","playMod":"coinMod 1|1 0 Silver","type":"Action"}]}')},,,function(e,a,t){e.exports=t(56)},,,,,function(e,a,t){},function(e,a,t){var c={"./Adventurer.jpg":16,"./Artisan.jpg":17,"./Bandit.jpg":18,"./Bureaucrat.jpg":19,"./Cellar.jpg":20,"./Chancellor.jpg":21,"./Chapel.jpg":22,"./Copper.jpg":23,"./Council_Room.jpg":24,"./Curse.jpg":25,"./Duchy.jpg":26,"./Estate.jpg":27,"./Feast.jpg":28,"./Festival.jpg":29,"./Gardens.jpg":30,"./Gold.jpg":31,"./Harbinger.jpg":32,"./Laboratory.jpg":33,"./Library.jpg":34,"./Market.jpg":35,"./Merchant.jpg":36,"./Militia.jpg":37,"./Mine.jpg":38,"./Moat.jpg":39,"./Moneylender.jpg":40,"./Poacher.jpg":41,"./Province.jpg":42,"./Remodel.jpg":43,"./Sentry.jpg":44,"./Silver.jpg":45,"./Smithy.jpg":46,"./Spy.jpg":47,"./Thief.jpg":48,"./Throne_Room.jpg":49,"./Vassal.jpg":50,"./Village.jpg":51,"./Witch.jpg":52,"./Woodcutter.jpg":53,"./Workshop.jpg":54};function n(e){var a=r(e);return t(a)}function r(e){if(!t.o(c,e)){var a=new Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}return c[e]}n.keys=function(){return Object.keys(c)},n.resolve=r,e.exports=n,n.id=15},function(e,a,t){e.exports=t.p+"static/media/Adventurer.be939008.jpg"},function(e,a,t){e.exports=t.p+"static/media/Artisan.4379fa98.jpg"},function(e,a,t){e.exports=t.p+"static/media/Bandit.9d98a617.jpg"},function(e,a,t){e.exports=t.p+"static/media/Bureaucrat.c539a1a4.jpg"},function(e,a,t){e.exports=t.p+"static/media/Cellar.963cda6a.jpg"},function(e,a,t){e.exports=t.p+"static/media/Chancellor.333df184.jpg"},function(e,a,t){e.exports=t.p+"static/media/Chapel.747b0f1e.jpg"},function(e,a,t){e.exports=t.p+"static/media/Copper.25a3a87b.jpg"},function(e,a,t){e.exports=t.p+"static/media/Council_Room.ace064e3.jpg"},function(e,a,t){e.exports=t.p+"static/media/Curse.b70192b7.jpg"},function(e,a,t){e.exports=t.p+"static/media/Duchy.d2c0c766.jpg"},function(e,a,t){e.exports=t.p+"static/media/Estate.c9ec060f.jpg"},function(e,a,t){e.exports=t.p+"static/media/Feast.e33241fa.jpg"},function(e,a,t){e.exports=t.p+"static/media/Festival.af0c9e52.jpg"},function(e,a,t){e.exports=t.p+"static/media/Gardens.2490700a.jpg"},function(e,a,t){e.exports=t.p+"static/media/Gold.df7287e6.jpg"},function(e,a,t){e.exports=t.p+"static/media/Harbinger.f0c114b5.jpg"},function(e,a,t){e.exports=t.p+"static/media/Laboratory.96f3a1b2.jpg"},function(e,a,t){e.exports=t.p+"static/media/Library.07857f88.jpg"},function(e,a,t){e.exports=t.p+"static/media/Market.70f1cd16.jpg"},function(e,a,t){e.exports=t.p+"static/media/Merchant.09ba9d2d.jpg"},function(e,a,t){e.exports=t.p+"static/media/Militia.b0b9a045.jpg"},function(e,a,t){e.exports=t.p+"static/media/Mine.9977d889.jpg"},function(e,a,t){e.exports=t.p+"static/media/Moat.ab3e6b16.jpg"},function(e,a,t){e.exports=t.p+"static/media/Moneylender.0480f84b.jpg"},function(e,a,t){e.exports=t.p+"static/media/Poacher.0964e482.jpg"},function(e,a,t){e.exports=t.p+"static/media/Province.6f81772e.jpg"},function(e,a,t){e.exports=t.p+"static/media/Remodel.fd52d3f6.jpg"},function(e,a,t){e.exports=t.p+"static/media/Sentry.7be7f767.jpg"},function(e,a,t){e.exports=t.p+"static/media/Silver.560c4fbe.jpg"},function(e,a,t){e.exports=t.p+"static/media/Smithy.3b2a2499.jpg"},function(e,a,t){e.exports=t.p+"static/media/Spy.a2aa11e0.jpg"},function(e,a,t){e.exports=t.p+"static/media/Thief.031b2660.jpg"},function(e,a,t){e.exports=t.p+"static/media/Throne_Room.8502a321.jpg"},function(e,a,t){e.exports=t.p+"static/media/Vassal.0c040b7c.jpg"},function(e,a,t){e.exports=t.p+"static/media/Village.595e2479.jpg"},function(e,a,t){e.exports=t.p+"static/media/Witch.e45eb845.jpg"},function(e,a,t){e.exports=t.p+"static/media/Woodcutter.157e926a.jpg"},function(e,a,t){e.exports=t.p+"static/media/Workshop.7873d057.jpg"},function(e,a,t){},function(e,a,t){"use strict";t.r(a);var c,n=t(0),r=t.n(n),s=t(8),o=t.n(s),i=(t(14),t(3)),d=t(2),l=t(1),u=t(6),p=["Village","Market","Cellar","Remodel","Mine","Moneylender","Vassal","Workshop","Harbinger","Merchant"],m=function(e){return function(a){return a.path=e.filter((function(e){return e.includes(a.name)}))[0],a}},h=(c=t(15)).keys().map(c),y=["treasure","victory"],f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return{victory:u.victory.map(m(h)),treasure:u.treasure.map(m(h)),action:u.action.map(m(h)).filter((function(a){return e.includes(a.name)}))}},g=t(58),v=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},j=["red","blue","orange","green"],b=["actions","buys","treasure","cards"],E=function(e,a,t,c,n){var s=c||0===c?c:a?a.length:1,o=a&&a[0].end?a[0].end:t||"plays";return[r.a.createElement("div",{className:"log",key:"log".concat(Object(g.a)().slice(0,8))},r.a.createElement("p",{className:"".concat(a?"":"turn-log")},a?n?"\u2022":"":r.a.createElement("span",null,"Turn ",e.turn," -\xa0"),r.a.createElement("span",{className:"".concat(j[e.turnPlayer-1])},"P",e.player),a?r.a.createElement("span",null,"\xa0",o," ",!a||"Action"!==a[0].name&&"Buy"!==a[0].name&&"Coin"!==a[0].name?"":"+",r.a.createElement("span",{className:"Coin"===a[0].name?"coin":""},a&&a[0].end?"their":1!==s||n?s:"a"),r.a.createElement("span",{className:"".concat(a[0].type,"-text")},"\xa0","Coin"===a[0].name?"":r.a.createElement("span",null,a[0].name),1!==s&&"Treasure"!==a[0].type&&"Coin"!==a[0].name?"s":"")):""))]},S=function(e,a,t,c){var n=[];return n=n.concat(E(e,a,t,c)),a&&"Action"===a[0].type&&"buys"!==t&&b.forEach((function(t){var c="cards"===t?"draws":"gets",r="treasure"===t?"Coin":"cards"===t?t.slice(0,-1):v(t).slice(0,-1),s="cards"===t&&a&&isNaN(a[0].cards);a[0][t]&&!s&&(n=n.concat(E(e,[Object(d.a)({},a[0],{name:r})],c,a[0][t],!0)))})),n},O=function(e){for(var a,t,c=Object(i.a)(e),n=c.length;0!==n;)t=Math.floor(Math.random()*n),a=c[n-=1],c[n]=c[t],c[t]=a;return c},T=function(e,a){var t=0;return e.forEach((function(e){t=e[a]?t+e[a]:t})),t},k=function(e,a){return e.map((function(e){return e.type===a})).includes(!0)},N=function(e,a){return[a.concat(S(e,[{name:"Buy Phase",end:"enters"}])),"Buy",0]},x=function(e){if(!e.actions||!k(e.hand,"Action")){var a=N(e.gameState,e.logs),t=Object(l.a)(a,3);e.logs=t[0],e.phase=t[1],e.actions=t[2]}return Object(d.a)({},e,{discardTrashQueue:[],discardTrashState:!1})},C=function(e,a,t){var c=Object(i.a)(a),n=c.splice(0,e),r=Object(i.a)(t);return a.length<e&&(c=c.concat(O(r)),r=[],n=n.concat(c.splice(0,e-n.length))),[n,c,r]},M=function(e,a,t,c){var n=Object(i.a)(t),r=n.findIndex((function(a){return a===e})),s=n.splice(r,a);return[n,Object(i.a)(c).concat(s),s]},w=function(e,a){var t=e[a].split(" "),c=t[1],n="",r="";return c.includes("|")&&(n=(c=c.split("|"))[1],c=c[0]),c.includes("[")&&(r=(c=c.split("["))[1],c=""),c=isNaN(c)?c:parseInt(c),n=isNaN(n)?n:parseInt(n),{card:e,type:t[0],amount:c,index:r,modifier:n,next:t[2]?[t[2],e[t[2]]]:[],restriction:t[3]}},A=function(e){var a=Object(n.useState)(!1),t=Object(l.a)(a,2),c=t[0],s=t[1],o=Object(n.useState)(!1),i=Object(l.a)(o,2),d=i[0],u=i[1],p=e.live&&!e.card.empty&&!e.supply&&!e.modal&&("Treasure"===e.card.type||e.discardTrash);return Object(n.useEffect)((function(){u(e.altKey)}),[e.altKey]),r.a.createElement("div",{className:"card-info ".concat(e.card.empty||e.queued.includes(e.card)?"transparent":"")},e.count>1||e.supply||e.queued.includes(e.card)?r.a.createElement("p",{onClick:function(a){if(p){var t=e.limit-e.queued.length,c=t>e.count?e.count:t;e.onClick(e.card,c),a.stopPropagation()}},className:"card-stack".concat(p?"-live":"")},e.card.empty?0:e.count):"",r.a.createElement("div",{className:"card ".concat(e.card.type," ").concat("Curse"===e.card.name?"curse":""," ").concat(e.live&&!e.card.empty?"live":""),onClick:function(){e.live&&!e.card.empty&&e.onClick(e.card,1,e.destination?e.destination:!!e.supply)},onMouseOver:function(){s(!0)},onMouseOut:function(){s(!1)}},r.a.createElement("p",{className:"card-top"},e.card.name.split("_").join(" ")),r.a.createElement("div",{className:"card-btm"},r.a.createElement("p",{className:"card-side"},e.card.cost),r.a.createElement("p",null,e.card.type),r.a.createElement("p",{className:"card-side"},"\xa0")),r.a.createElement("div",{className:"full-card-wrapper ".concat(e.stacked?"lower-card":"")},r.a.createElement("div",{className:"full-card ".concat(e.card.type," ").concat(c&&d?"":"hidden"," ").concat(e.live?"full-card-live":""," ").concat("Curse"===e.card.name?"curse":"")},r.a.createElement("div",{className:"card-top"},r.a.createElement("p",null,e.card.name.split("_").join(" ")),r.a.createElement("div",{className:"".concat("Action"===e.card.type?"action":"card","-image"),style:{backgroundImage:"url(".concat(e.card.path,")")}}),"Action"===e.card.type?r.a.createElement("div",{className:"card-instructions"},r.a.createElement("div",{className:"perks"},["cards","actions","buys","treasure"].map((function(a){var t="treasure"===a?r.a.createElement("span",{className:"coin"},e.card[a]):e.card[a]>1?v(a):v(a).slice(0,-1);return e.card[a]&&!isNaN(e.card[a])&&e.card.hidden!==a?r.a.createElement("p",{key:a},"+",r.a.createElement("span",null,"treasure"!==a?e.card[a]:""," ",t)):""}))),r.a.createElement("div",{className:"instructions"},function(){var a=e.card.instructions?e.card.instructions:"";if(a.includes("coin-")){var t=(a=a.split("coin-"))[1].length>1?a[1].split(" "):[a[1]],c=a[0],n=t.shift();t=t.length>0?t.join(" "):"",a=r.a.createElement("div",null,c,r.a.createElement("span",{className:"coin"},n)," ",t)}return a}())):""),r.a.createElement("div",{className:"card-btm"},r.a.createElement("p",{className:"card-side"},e.card.cost),r.a.createElement("p",null,e.card.type),r.a.createElement("p",{className:"card-side"},"\xa0"))))))},P=function(e){return function(a,t){var c=0;return a[e]>t[e]?c=1:a[e]<t[e]&&(c=-1),c}},B=function(e){var a=[e.cards],t=1,c=[[],[],[]];if(e.sort){a[0].sort(P("name")),a[0].sort(P("type"));var n=a[0].filter((function(e){return"Action"===e.type})).sort(P("cost")),s=a[0].filter((function(e){return"Treasure"===e.type})).sort(P("cost")),o=a[0].filter((function(e){return"Victory"===e.type})).sort(P("cost"));a=e.supply?[s,o,n]:[n,s,o]}a.forEach((function(a,n){a.forEach((function(s,o){var i=e.phase===s.type&&!e.supply||"Buy"===e.phase&&"Treasure"===s.type&&!e.supply||("Buy"===e.phase||"supply"===e.phase)&&e.coin+e.coinMod>=s.cost&&e.supply||e.discardTrashState;if(a[o+1]&&a[o+1].name===s.name)t++;else{var d=e.cardQueue?e.cardQueue:[],l=Number.MAX_SAFE_INTEGER;if(e.discardTrashState&&!isNaN(e.discardTrashState.amount)&&(l=parseInt(e.discardTrashState.amount)),d.length>0){var u=0;d.forEach((function(e){e.name===s.name&&(u+=1)})),i=(t-=u)>0&&d.length<l}e.restriction&&(i=i&&(e.restriction===s.type||e.restriction===s.subType)),e.actionSupply&&(i=i&&e.supply),c[n].push(r.a.createElement("div",{key:"card".concat(n).concat(o),className:"inline"},r.a.createElement(A,{altKey:e.altKey,card:s,live:!!e.live||i,modal:e.modal,count:t,stacked:e.stacked,onClick:e.onClick,supply:e.supply,queued:d,limit:l,discardTrash:e.discardTrashState,destination:!!e.actionSupply&&e.actionSupply.destination}))),t=1}}))}));var i=c[0].concat(c[1]).concat(c[2]),d=e.title?r.a.createElement("p",{className:"red top-spaced"},e.title," (",e.cards.length,")"):"";return e.stacked?c.map((function(e,a){return r.a.createElement("div",{key:"stack".concat(a),className:"stack"},e)})):e.supply?c.map((function(e,a){return r.a.createElement("div",{key:"supply".concat(a),className:"supply"},e)})):r.a.createElement("div",null,d,r.a.createElement("div",{className:"Discard"===e.title?"discard-stack":""},i))},D=function(e){return r.a.createElement("div",null,r.a.createElement(B,{altKey:e.altKey,onClick:e.accept,cards:e.cards,live:e.live,title:e.title,modal:!0}),r.a.createElement("div",{className:"game-button start-button live",onClick:e.decline},v(e.buttonText)))},Q=function(e,a,t,c){var n,s=[],o=!1;t.logs=t.logs.concat(S(t.gameState,[e])),t.actions--;var i=M(e,a,t.hand,t.inPlay),u=Object(l.a)(i,3);if(t.hand=u[0],t.inPlay=u[1],n=u[2],t.treasure+=T(n,"treasure"),e.actions&&(t.actions+=e.actions),e.buys&&(t.buys+=e.buys),e.cards){var p=C(e.cards,t.deck,t.discard),m=Object(l.a)(p,3);s=m[0],t.deck=m[1],t.discard=m[2],s.length>0?t.hand=t.hand.concat(s):t.logs.pop()}if(e.playMod)if(t.playMod){var h=w(e,"playMod");t.playMod.amount+=h.amount}else t.playMod=w(e,"playMod");var y=!!e.discardTrash&&w(e,"discardTrash"),f=!k(t.hand,"Action");if(y)if(y.next&&"auto"===y.next[0]){var g=function(e,a,t,c){var n=[{name:"card".concat(t.modifier?" from ".concat(t.modifier):"")}];if(t.modifier&&"up-to"!==t.modifier){var s=w(e,t.modifier);switch(t.modifier){case"deck":a.deck.length<1&&(a=Object(d.a)({},a,{deck:a.discard,discard:[]}));var o=a.deck.splice(s.index,t.amount);if("modal"===s.next[0]&&o.length>0){var i=s.type===o[0].type;i?(a.actions++,a.menuScreen=r.a.createElement(D,{cards:o,accept:function(){a.menuScreen=null,a.hand=a.hand.concat(o[0]),a=Q(o[0],1,a,c),c.setTurnState(a)},decline:function(){a.actions--,0===(a=x(a)).actions&&c.setPhase("Buy"),a.hand.splice(a.hand.findIndex((function(e){return e===o[0]})),1);var e=a.logs.pop();a=Object(d.a)({},a,{discard:a.discard.concat(o),logs:a.logs.concat(E(a.gameState,n,"discards",1,!0)).concat(e),menuScreen:null}),c.setTurnState(a),c.setDiscardTrashState(!1)},buttonText:t.type,live:i,title:"You may play"})):o.length>0&&(a.discard=a.discard.concat(o),a.logs=a.logs.concat(E(a.gameState,n,"discards",1,!0)))}}}else{var l="discards",u=a.hand.findIndex((function(e){return e.name===t.restriction}));-1===u?(a.coinMod-=3,a.logs.pop()):("discard"===t.type?a.discard=a.discard.concat(a.hand.splice(u,t.amount)):(a.trash=a.trash.concat(a.hand.splice(u,t.amount)),l="trashes"),a.logs=a.logs.concat(E(a.gameState,n,l,t.amount,!0)))}var p=!k(a.hand,"Action");return[a,p]}(e,t,y,c),v=Object(l.a)(g,2);t=v[0],f=v[1]}else f=!1,c.setDiscardTrashState(y);else if(e.supply){var j=w(e,"supply");o={treasure:t.treasure,count:1,destination:j.next&&j.next[0]?j.next[0]:"discard"},t.treasure=j.amount}else if(e.discard){var b=w(e,"discard");switch(b.type){case"modal":t.discard.length>0&&(t.menuScreen=r.a.createElement(D,{cards:t.discard,accept:function(e){var a=M(e,b.amount,t.discard,t.deck),n=Object(l.a)(a,2);t.discard=n[0],t.deck=n[1],t.logs=t.logs.concat(E(t.gameState,[{name:"discard to deck"}],"moves",b.amount,!0)),t.menuScreen=!1,t=x(t),c.setTurnState(t)},decline:function(){c.setTurnState(Object(d.a)({},t,{menuScreen:!1}))},buttonText:"Decline",live:!0,title:"Choose ".concat(b.amount," to move from discard to deck")}))}}var O=!y||!(!y.next||"auto"!==y.next[0]);if(O=!t.menuScreen&&O,(!t.actions||f)&&O&&!o){var A=N(t.gameState,t.logs),P=Object(l.a)(A,3);t.logs=P[0],t.phase=P[1],t.actions=P[2]}return c.setActionSupply(o),t},V=function(e,a){return e.forEach((function(e){var t=a.playMod.restriction,c=a.playMod.modifier;if(a.playMod&&(!t||t===e.name||t===e.type)&&(isNaN(c)||c>0)){var n=isNaN(c)?c:c-1;a.coinMod+=a.playMod.amount,a.logs=a.logs.concat(E(a.gameState,[{name:"Coin"}],"gets",a.playMod.amount,!0)),a.playMod=0!==n&&Object(d.a)({},a.playMod,{modifier:n})}})),a},I=function(e){var a=document.getElementById("log-sticker");return Object(n.useEffect)((function(){a&&a.scrollIntoView()}),[e.logs,a]),r.a.createElement("div",{className:"logs"},r.a.createElement("p",{className:"log-title"},"Log"),r.a.createElement("div",{className:"breakline"}),r.a.createElement("div",{className:"log-readout"},e.logs.length>1?e.logs:r.a.createElement("div",{className:"spacer"}),r.a.createElement("div",{id:"log-sticker"})))},G=function(e){return r.a.createElement("div",{className:"info"},r.a.createElement("span",{className:"hidden"},"VP ",r.a.createElement("span",{className:"red"},e.victoryPoints)," |\xa0"),r.a.createElement("span",null,"Action ",r.a.createElement("span",{className:"red"},e.actions)," |\xa0"),r.a.createElement("span",null,"Buys ",r.a.createElement("span",{className:"red"},e.buys)," |\xa0"),r.a.createElement("span",null,"Coin ",r.a.createElement("span",{className:"coin"},e.treasure-e.bought+e.coinMod)," "))},K=function(e){return r.a.createElement("div",{className:"trash game-button".concat(e.trash.length>0?" active":""),onClick:function(){e.trash.length>0&&(e.setModalContent([e.trash,"Trash"]),e.setShowModal(!0))}},"Trash (",e.trash.length,")")},W=function(e,a,t){return e.filter((function(e){return e[a]===t})).length},_=function(e){return r.a.createElement("div",{className:"button-display"},r.a.createElement("div",null,r.a.createElement("div",{className:"game-button red"},e.phase?"Your Turn - ".concat(e.phase," Phase"):"P2's Turn"),r.a.createElement("p",{className:"instructions red"},function(e,a,t,c){var n="";if(t){var r=t.modifier?"".concat(t.modifier.split("-").join(" ")," "):"",s=t.amount&&isNaN(t.amount)?"(s)":t.amount>1?"s":"";n="Select ".concat(r).concat(t.amount," card").concat(s).concat(c?"":" to ".concat(t.type))}else n=c?"Choose a Card":"Buy"===e?"Choose Cards to Buy (".concat(a,")"):"Choose Actions to play";return n}(e.phase,e.buys,e.discardTrashState,e.actionSupply),"\xa0"),e.actionSupply?"":r.a.createElement("div",null,r.a.createElement("div",{className:e.discardTrashState||!e.phase?"hidden":W(e.hand,"type","Treasure")>0&&"Buy"===e.phase?"game-button live":"button-space",onClick:e.playAllTreasure},W(e.hand,"type","Treasure")>0&&"Buy"===e.phase?"Play All Treasure (".concat(W(e.hand,"type","Treasure"),")"):" "),r.a.createElement("div",{className:"game-button live".concat(e.discardTrashState||!e.phase?"":" top-spaced"),onClick:e.discardTrashState?e.discardTrashCards:e.nextPhase},e.discardTrashState?"Confirm Card".concat(isNaN(e.discardTrashState.amount)||e.discardTrashState.amount>1?"s":""," to ").concat(e.discardTrashState.type," (").concat(e.discardTrashQueue.length,")"):e.phase?"End ".concat(e.phase," Phase"):"Start Turn"),r.a.createElement("div",{className:"game-button live top-spaced ".concat(e.discardTrashState&&e.discardTrashQueue.length>0?"":" hidden"),onClick:function(){e.setDiscardTrashQueue([])}},"Choose different cards"))),r.a.createElement("div",null,r.a.createElement("div",{className:"breakline"}),r.a.createElement("div",{className:"deck"},r.a.createElement("p",null,"Deck (",e.deck.length,")")),r.a.createElement("div",{className:"deck ".concat(e.discard.length>0?"active":""),onClick:function(){e.discard.length>0&&(e.setModalContent([e.discard,"Discard"]),e.setShowModal(!0))}},r.a.createElement("p",null,"Discard (",e.discard.length,")"))))},L=function(e){return r.a.createElement("div",{style:{display:e.show?"flex":"none"},className:"modal-bg",onClick:function(){return e.setShow(!1)}},r.a.createElement("div",{className:"modal-box",onClick:function(e){return e.stopPropagation()}},r.a.createElement("div",{className:"modal-top-row"},e.close?r.a.createElement("div",{className:"x-close-button",onClick:function(){return e.setShow(!1)}},"x"):""),r.a.createElement("div",{className:"modal-content"},e.children)))},R=function(e){return r.a.createElement(L,{close:!0,show:e.showModal,setShow:e.setShowModal,children:r.a.createElement(B,{altKey:e.altKey,cards:e.modalContent[0],title:e.modalContent[1]})})},F=function(e){return r.a.createElement("div",null,r.a.createElement("h2",{className:"title"},e.phaseTitle),e.start?r.a.createElement("h1",null,"Dominion"):r.a.createElement("p",null,e.victory," Victory Points!"),r.a.createElement("div",{className:"game-button start-button live",onClick:e.onClick},e.button))};t(55);var Y=function(){var e=Object(n.useState)(),a=Object(l.a)(e,2),t=a[0],c=a[1],s=Object(n.useState)(!1),o=Object(l.a)(s,2),u=o[0],m=o[1],h=Object(n.useState)(!1),v=Object(l.a)(h,2),j=v[0],b=v[1],A=Object(n.useState)([]),P=Object(l.a)(A,2),D=P[0],W=P[1],Y=Object(n.useState)([[]]),q=Object(l.a)(Y,2),H=q[0],J=q[1],U=Object(n.useState)(!1),X=Object(l.a)(U,2),$=X[0],z=X[1],Z=Object(n.useState)(!1),ee=Object(l.a)(Z,2),ae=ee[0],te=ee[1],ce=Object(n.useState)(!1),ne=Object(l.a)(ce,2),re=ne[0],se=ne[1],oe=Object(n.useState)([]),ie=Object(l.a)(oe,2),de=ie[0],le=ie[1],ue=Object(n.useState)({turn:0,player:1,turnPlayer:1}),pe=Object(l.a)(ue,2),me=pe[0],he=pe[1],ye=Object(n.useState)([]),fe=Object(l.a)(ye,2),ge=fe[0],ve=fe[1],je=Object(n.useState)([]),be=Object(l.a)(je,2),Ee=be[0],Se=be[1],Oe=Object(n.useState)([]),Te=Object(l.a)(Oe,2),ke=Te[0],Ne=Te[1],xe=Object(n.useState)([]),Ce=Object(l.a)(xe,2),Me=Ce[0],we=Ce[1],Ae=Object(n.useState)(0),Pe=Object(l.a)(Ae,2),Be=Pe[0],De=Pe[1],Qe=Object(n.useState)([]),Ve=Object(l.a)(Qe,2),Ie=Ve[0],Ge=Ve[1],Ke=Object(n.useState)([]),We=Object(l.a)(Ke,2),_e=We[0],Le=We[1],Re=Object(n.useState)(0),Fe=Object(l.a)(Re,2),Ye=Fe[0],qe=Fe[1],He=Object(n.useState)(0),Je=Object(l.a)(He,2),Ue=Je[0],Xe=Je[1],$e=Object(n.useState)(0),ze=Object(l.a)($e,2),Ze=ze[0],ea=ze[1],aa=Object(n.useState)(0),ta=Object(l.a)(aa,2),ca=ta[0],na=ta[1],ra=Object(n.useState)(),sa=Object(l.a)(ra,2),oa=sa[0],ia=sa[1],da=Object(n.useState)(),la=Object(l.a)(da,2),ua=la[0],pa=la[1],ma=function(){var e=O(function(){var e=[];return y.forEach((function(a){for(var t=0;t<("treasure"===a?7:3);t++)e.push(f()[a][0])})),e}());pa(T(e,"victory")),Se(e.splice(0,5)),ve(e),Le(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],a=y.concat("action"),t=[],c=function(a){f(e)[a].forEach((function(e,c){for(var n="treasure"===a?20*(3-c):"action"===a||"Curse"===e.name?10:8,r=0;r<n;r++)t.push(e)}))};return a.forEach(c),t}(p)),we([]),Ne([]),le([]),Ge([]),ga(null),c(null),ia(0),Xe(0),na(0),he(Object(d.a)({},me,{turn:1}))},ha=Object(n.useState)(r.a.createElement(F,{onClick:ma,phaseTitle:"Let's Play",start:!0,button:"Start Game"})),ya=Object(l.a)(ha,2),fa=ya[0],ga=ya[1],va={gameState:me,hand:Object(i.a)(Ee),deck:Object(i.a)(ge),discard:Object(i.a)(Me),trash:Object(i.a)(Ie),inPlay:Object(i.a)(ke),logs:Object(i.a)(de),supply:Object(i.a)(_e),discardTrashQueue:Object(i.a)(D),discardTrashState:!!j&&Object(d.a)({},j),actions:Ze,buys:ca,treasure:Ue,phase:t,menuScreen:fa,coinMod:Be,playMod:ae},ja=function(e,a,n){va.treasure=T(ke,"treasure");var s=t===e.type?1:a;switch(t){case"Action":var o={setDiscardTrashState:b,setPhase:c,setActionSupply:se,setTurnState:ba};if(e.type===t)va=Q(e,s,va,o);else{var u=N(me,va.logs),p=Object(l.a)(u,3);va.logs=p[0],va.phase=p[1],va.actions=p[2]}break;case"Buy":var m=ca,h=ua;if(n){var y,f=M(e,1,_e,va.discard),v=Object(l.a)(f,3);va.supply=v[0],va.discard=v[1],y=v[2];var j=va.supply.filter((function(a){return a.name===e.name})).length;if(h=e.victory?h+e.victory:h,!j&&(ia(oa+1),y=[Object(d.a)({},y[0],{empty:!0})],va.supply=va.supply.concat(y),"Province"===e.name||2===oa)){Le(va.supply),he(Object(d.a)({},me,{turn:0})),va.menuScreen=r.a.createElement(F,{onClick:ma,phaseTitle:"Game Over",victory:h,button:"Play Again"});break}Le(va.supply),qe(Ye+e.cost),m-=1,va.logs=va.logs.concat(S(me,y,"buys"))}else if("Treasure"===e.type){var E,O=M(e,s,Ee,ke),x=Object(l.a)(O,3);va.hand=x[0],va.inPlay=x[1],E=x[2],va.treasure+=T(E,"treasure"),va.logs=va.logs.concat(S(me,[e],null,a))}else m=0;if(m<1||Ue-Ye-e.cost<1&&n){var w=Object(i.a)(ge);va=Object(d.a)({},va,{inPlay:[],discard:va.discard.concat(ke).concat(Ee),hand:w.splice(0,5)}),m=0;var A=C(5,va.deck,va.discard),P=Object(l.a)(A,3);va.hand=P[0],va.deck=P[1],va.discard=P[2],va=Object(d.a)({},va,{actions:0,treasure:0,coinMod:0,playMod:!1,phase:null,logs:va.logs.concat(S(me,[{name:"turn",end:"ends"}]))}),qe(0),he(Object(d.a)({},me,{turn:me.turn+1}))}va.buys=m,pa(h);break;default:var B=1===me.turn&&1===me.turnPlayer?[]:[r.a.createElement("div",{key:"log".concat(Object(g.a)().slice(0,8)),className:"spacer"})];if(va.logs=va.logs.concat(B.concat(S(me))),va.buys=1,k(Ee,"Action"))va.actions=1,va.phase="Action";else{var D=N(me,va.logs),I=Object(l.a)(D,2);va.logs=I[0],va.phase=I[1]}}va.playMod&&(va=V([e],va)),ba(va)},ba=function(e){Se(e.hand),ve(e.deck),we(e.discard),Ge(e.trash),Ne(e.inPlay),le(e.logs),Le(e.supply),ea(e.actions),na(e.buys),Xe(e.treasure),c(e.phase),ga(e.menuScreen),De(e.coinMod),te(e.playMod)};return window.onkeydown=function(e){18===e.keyCode?z(!0):27===e.keyCode?m(!1):13===e.keyCode&&fa&&0===me.turn&&ma()},window.onkeyup=function(e){18===e.keyCode&&z(!1)},r.a.createElement("div",{className:"App"},r.a.createElement("div",{className:"supply-market"},r.a.createElement(B,{coin:Ue-Ye,phase:re?"supply":t,onClick:re?function(e,a,t){va.logs=va.logs.concat(E(me,[Object(d.a)({},e,{name:"discard"===t?e.name:r.a.createElement("span",null,e.name,r.a.createElement("span",{className:"default-text"}," to their ",t))})],"gains",1,!0));var c=M(e,a,_e,va[t]),n=Object(l.a)(c,2);va.supply=n[0],va[t]=n[1],va.treasure=re.treasure,va=x(va),ba(va),W(va.discardTrashQueue),b(va.discardTrashState),se(!1)}:ja,actionSupply:re,sort:!0,supply:!0,altKey:$,cards:_e,coinMod:Be,restriction:j?j.restriction:void 0})),r.a.createElement(I,{logs:de}),r.a.createElement(G,{victoryPoints:ua,actions:Ze,buys:ca,treasure:Ue,coinMod:Be,bought:Ye}),r.a.createElement(K,{trash:Ie,setModalContent:J,setShowModal:m}),r.a.createElement("div",{className:"in-play"},r.a.createElement(B,{sort:!0,altKey:$,cards:ke})),r.a.createElement("div",{className:"combo-mat"}),r.a.createElement(_,{buys:ca,actionSupply:re,hand:Ee,phase:t,discardTrashState:j,discardTrashQueue:D,setDiscardTrashQueue:W,deck:ge,setModalContent:J,setShowModal:m,discard:Me,playAllTreasure:function(){var e=va.hand.filter((function(e){return"Treasure"===e.type}));e.filter((function(e,a,t){return t.indexOf(e)===a})).forEach((function(a){va.logs=va.logs.concat(S(me,e.filter((function(e){return a.name===e.name}))))})),va.inPlay=va.inPlay.concat(e),va.hand=Ee.filter((function(e){return"Treasure"!==e.type})),va.treasure=T(va.inPlay,"treasure"),va.playMod&&(va=V(e,va)),ba(va)},discardTrashCards:function(){if(D.length>0){var e="discards";D.forEach((function(e){va.hand.splice(va.hand.findIndex((function(a){return a===e})),1)})),"discard"===va.discardTrashState.type?(va.discard=va.discard.concat(D),we(va.discard)):(e="trashes",va.trash=va.trash.concat(D),Ge(va.trash)),va.logs=va.logs.concat(E(me,[{name:"card"}],e,D.length,!0)),va=va.discardTrashState.next.length>0?function(e,a){var t=e.discardTrashState.next[0],c=e.treasure;switch(t){case"draw":var n,r=isNaN(e.discardTrashState.next[1])?e.discardTrashQueue.length:e.discardTrashState.next[1],s=C(r,e.deck,e.discard),o=Object(l.a)(s,3);n=o[0],e.deck=o[1],e.discard=o[2],e=Object(d.a)({},e,{hand:e.hand.concat(n),logs:e.logs.concat(E(e.gameState,[{name:"card"}],"draws",e.discardTrashQueue.length,!0))}),e=x(e);break;case"supply":var i=w(e.discardTrashState.card,"supply");c="discardTrash"===i.type?e.discardTrashQueue[0].cost+parseInt(i.amount):i.amount,a({treasure:e.treasure,count:e.discardTrashState.amount,destination:i.next&&i.next[0]?i.next[0]:"discard"}),e.discardTrashQueue=[]}return Object(d.a)({},e,{treasure:c})}(va,se):x(va)}else va=x(va);b(va.discardTrashState),W(va.discardTrashQueue),ba(va)},startGame:ma,nextPhase:ja}),r.a.createElement("div",{className:"hand"},r.a.createElement(B,{altKey:$,stacked:!0,sort:!0,cards:Ee,phase:t,onClick:j?function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,t=M(e,a,Ee,D);W(t[1])}:ja,discardTrashState:j,actionSupply:re,restriction:j?j.restriction:void 0,cardQueue:D})),r.a.createElement(L,{show:!!fa,setShow:function(){},children:fa}),r.a.createElement(R,{showModal:u,setShowModal:m,altKey:$,modalContent:H}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(Y,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}],[[9,1,2]]]);
//# sourceMappingURL=main.1e004bb1.chunk.js.map