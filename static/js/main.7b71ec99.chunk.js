(this.webpackJsonpjsminion=this.webpackJsonpjsminion||[]).push([[0],[,,,,,,function(e){e.exports=JSON.parse('{"victory":[{"name":"Estate","cost":2,"victory":1,"type":"Victory"},{"name":"Duchy","cost":5,"victory":3,"type":"Victory"},{"name":"Province","cost":8,"victory":6,"type":"Victory"},{"name":"Curse","cost":0,"victory":-1,"type":"Victory"}],"treasure":[{"name":"Copper","cost":0,"treasure":1,"type":"Treasure"},{"name":"Silver","cost":3,"treasure":2,"type":"Treasure"},{"name":"Gold","cost":6,"treasure":3,"type":"Treasure"}],"action":[{"name":"Village","cost":3,"actions":2,"cards":1,"type":"Action"},{"name":"Smithy","cost":4,"cards":3,"type":"Action"},{"name":"Market","cost":5,"actions":1,"cards":1,"buys":1,"treasure":1,"type":"Action"},{"name":"Festival","cost":5,"actions":2,"buys":1,"treasures":2,"type":"Action"},{"name":"Laboratory","cost":5,"cards":2,"actions":1,"type":"Action"},{"name":"Chapel","cost":2,"instructions":"Trash up to 4 cards from your hand.","discardTrash":"trash 4|up-to","type":"Action"},{"name":"Cellar","cost":2,"actions":1,"instructions":"Discard any number of cards, then draw that many.","discardTrash":"discard any draw","type":"Action"},{"name":"Remodel","cost":4,"instructions":"Trash a card from your hand. Gain a card costing up to coin-2 more than it.","discardTrash":"trash 1 supply","supply":"discardTrash 2","type":"Action"},{"name":"Mine","cost":5,"instructions":"You may trash a Treasure from your hand. Gain a Treasure to your hand costing up to coin-3 more than it.","discardTrash":"trash 1 supply Treasure","supply":"discardTrash 3","type":"Action"},{"name":"Moneylender","cost":4,"treasure":3,"instructions":"You may trash a Copper from your hand for +coin-3","discardTrash":"trash 1 auto Copper","type":"Action","hidden":"treasure"},{"name":"Vassal","cost":3,"treasure":2,"instructions":"Discard the top card of your deck. If it\'s an Action card, you may play it.","discardTrash":"discard 1|deck auto","deck":"0 modal Action","type":"Action"},{"name":"Workshop","cost":3,"instructions":"Gain a card costing up to coin-4","supply":"4","type":"Action"},{"name":"Harbinger","cost":3,"cards":1,"actions":1,"instructions":"Look through your discard pile. You may put a card from it onto your deck.","discardPile":"1 deck","type":"Action"},{"name":"Merchant","cost":3,"treasure":"Silver 1","cards":1,"actions":1,"instructions":"The first time you play a Silver this turn, +coin-1","buyPhase":"1 first Silver","type":"Action"}]}')},,,function(e,a,t){e.exports=t(56)},,,,,function(e,a,t){},function(e,a,t){var c={"./Adventurer.jpg":16,"./Artisan.jpg":17,"./Bandit.jpg":18,"./Bureaucrat.jpg":19,"./Cellar.jpg":20,"./Chancellor.jpg":21,"./Chapel.jpg":22,"./Copper.jpg":23,"./Council_Room.jpg":24,"./Curse.jpg":25,"./Duchy.jpg":26,"./Estate.jpg":27,"./Feast.jpg":28,"./Festival.jpg":29,"./Gardens.jpg":30,"./Gold.jpg":31,"./Harbinger.jpg":32,"./Laboratory.jpg":33,"./Library.jpg":34,"./Market.jpg":35,"./Merchant.jpg":36,"./Militia.jpg":37,"./Mine.jpg":38,"./Moat.jpg":39,"./Moneylender.jpg":40,"./Poacher.jpg":41,"./Province.jpg":42,"./Remodel.jpg":43,"./Sentry.jpg":44,"./Silver.jpg":45,"./Smithy.jpg":46,"./Spy.jpg":47,"./Thief.jpg":48,"./Throne_Room.jpg":49,"./Vassal.jpg":50,"./Village.jpg":51,"./Witch.jpg":52,"./Woodcutter.jpg":53,"./Workshop.jpg":54};function n(e){var a=r(e);return t(a)}function r(e){if(!t.o(c,e)){var a=new Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}return c[e]}n.keys=function(){return Object.keys(c)},n.resolve=r,e.exports=n,n.id=15},function(e,a,t){e.exports=t.p+"static/media/Adventurer.be939008.jpg"},function(e,a,t){e.exports=t.p+"static/media/Artisan.4379fa98.jpg"},function(e,a,t){e.exports=t.p+"static/media/Bandit.9d98a617.jpg"},function(e,a,t){e.exports=t.p+"static/media/Bureaucrat.c539a1a4.jpg"},function(e,a,t){e.exports=t.p+"static/media/Cellar.963cda6a.jpg"},function(e,a,t){e.exports=t.p+"static/media/Chancellor.333df184.jpg"},function(e,a,t){e.exports=t.p+"static/media/Chapel.747b0f1e.jpg"},function(e,a,t){e.exports=t.p+"static/media/Copper.25a3a87b.jpg"},function(e,a,t){e.exports=t.p+"static/media/Council_Room.ace064e3.jpg"},function(e,a,t){e.exports=t.p+"static/media/Curse.b70192b7.jpg"},function(e,a,t){e.exports=t.p+"static/media/Duchy.d2c0c766.jpg"},function(e,a,t){e.exports=t.p+"static/media/Estate.c9ec060f.jpg"},function(e,a,t){e.exports=t.p+"static/media/Feast.e33241fa.jpg"},function(e,a,t){e.exports=t.p+"static/media/Festival.af0c9e52.jpg"},function(e,a,t){e.exports=t.p+"static/media/Gardens.2490700a.jpg"},function(e,a,t){e.exports=t.p+"static/media/Gold.df7287e6.jpg"},function(e,a,t){e.exports=t.p+"static/media/Harbinger.f0c114b5.jpg"},function(e,a,t){e.exports=t.p+"static/media/Laboratory.96f3a1b2.jpg"},function(e,a,t){e.exports=t.p+"static/media/Library.07857f88.jpg"},function(e,a,t){e.exports=t.p+"static/media/Market.70f1cd16.jpg"},function(e,a,t){e.exports=t.p+"static/media/Merchant.09ba9d2d.jpg"},function(e,a,t){e.exports=t.p+"static/media/Militia.b0b9a045.jpg"},function(e,a,t){e.exports=t.p+"static/media/Mine.9977d889.jpg"},function(e,a,t){e.exports=t.p+"static/media/Moat.ab3e6b16.jpg"},function(e,a,t){e.exports=t.p+"static/media/Moneylender.0480f84b.jpg"},function(e,a,t){e.exports=t.p+"static/media/Poacher.0964e482.jpg"},function(e,a,t){e.exports=t.p+"static/media/Province.6f81772e.jpg"},function(e,a,t){e.exports=t.p+"static/media/Remodel.fd52d3f6.jpg"},function(e,a,t){e.exports=t.p+"static/media/Sentry.7be7f767.jpg"},function(e,a,t){e.exports=t.p+"static/media/Silver.560c4fbe.jpg"},function(e,a,t){e.exports=t.p+"static/media/Smithy.3b2a2499.jpg"},function(e,a,t){e.exports=t.p+"static/media/Spy.a2aa11e0.jpg"},function(e,a,t){e.exports=t.p+"static/media/Thief.031b2660.jpg"},function(e,a,t){e.exports=t.p+"static/media/Throne_Room.8502a321.jpg"},function(e,a,t){e.exports=t.p+"static/media/Vassal.0c040b7c.jpg"},function(e,a,t){e.exports=t.p+"static/media/Village.595e2479.jpg"},function(e,a,t){e.exports=t.p+"static/media/Witch.e45eb845.jpg"},function(e,a,t){e.exports=t.p+"static/media/Woodcutter.157e926a.jpg"},function(e,a,t){e.exports=t.p+"static/media/Workshop.7873d057.jpg"},function(e,a,t){},function(e,a,t){"use strict";t.r(a);var c,n=t(0),r=t.n(n),s=t(8),o=t.n(s),i=(t(14),t(3)),l=t(2),d=t(1),u=t(6),p=["Village","Smithy","Market","Chapel","Cellar","Remodel","Mine","Moneylender","Festival","Laboratory"],m=function(e){return function(a){return a.path=e.filter((function(e){return e.includes(a.name)}))[0],a}},h=(c=t(15)).keys().map(c),y=["treasure","victory"],f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return{victory:u.victory.map(m(h)),treasure:u.treasure.map(m(h)),action:u.action.map(m(h)).filter((function(a){return e.includes(a.name)}))}},g=t(58),v=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},b=["red","blue","orange","green"],j=["actions","cards","buys","treasure"],E=function(e,a,t,c,n){var s=c||0===c?c:a?a.length:1,o=a&&a[0].end?a[0].end:t||"plays";return[r.a.createElement("div",{className:"log",key:"log".concat(Object(g.a)().slice(0,8))},r.a.createElement("p",{className:"".concat(a?"":"turn-log")},a?n?"\u2022":"":r.a.createElement("span",null,"Turn ",e.turn," -\xa0"),r.a.createElement("span",{className:"".concat(b[e.turnPlayer-1])},"P",e.player),a?r.a.createElement("span",null,"\xa0",o," ",!a||"Action"!==a[0].name&&"Buy"!==a[0].name&&"Coin"!==a[0].name?"":"+",r.a.createElement("span",{className:"Coin"===a[0].name?"coin":""},a&&a[0].end?"their":1!==s||n?s:"a"),r.a.createElement("span",{className:"".concat(a[0].type,"-text")},"\xa0","Coin"===a[0].name?"":r.a.createElement("span",null,a[0].name),1!==s&&"Treasure"!==a[0].type&&"Coin"!==a[0].name?"s":"")):""))]},O=function(e,a,t,c){var n=[];return n=n.concat(E(e,a,t,c)),a&&"Action"===a[0].type&&"buys"!==t&&j.forEach((function(t){var c="cards"===t?"draws":"gets",r="treasure"===t?"Coin":v(t).slice(0,-1),s="cards"===t&&a&&isNaN(a[0].cards);a[0][t]&&!s&&(n=n.concat(E(e,[Object(i.a)({},a[0],{name:r})],c,a[0][t],!0)))})),n},T=function(e){for(var a,t,c=Object(l.a)(e),n=c.length;0!==n;)t=Math.floor(Math.random()*n),a=c[n-=1],c[n]=c[t],c[t]=a;return c},S=function(e,a){var t=0;return e.forEach((function(e){t=e[a]?t+e[a]:t})),t},k=function(e){return e.map((function(e){return"Action"===e.type})).includes(!0)},N=function(e){var a=0;return e.forEach((function(e){a+=e.treasure?e.treasure:0})),a},C=function(e){return e.actions&&k(e.hand)||(e=Object(i.a)({},e,{phase:"Buy",actions:0,logs:e.logs.concat(O(e.gameState,[{name:"Buy Phase",end:"enters"}]))})),Object(i.a)({},e,{discardTrashQueue:[],discardTrashState:!1})},x=function(e,a,t){var c=Object(l.a)(a),n=c.splice(0,e),r=Object(l.a)(t);return a.length<e&&(c=c.concat(T(r)),r=[],n=n.concat(c.splice(0,e-n.length))),[n,c,r]},w=function(e,a,t,c){var n=Object(l.a)(t),r=n.findIndex((function(a){return a===e})),s=n.splice(r,a);return[n,Object(l.a)(c).concat(s),s]},A=function(e){var a=Object(n.useState)(!1),t=Object(d.a)(a,2),c=t[0],s=t[1],o=Object(n.useState)(!1),i=Object(d.a)(o,2),l=i[0],u=i[1];return Object(n.useEffect)((function(){u(e.altKey)}),[e.altKey]),r.a.createElement("div",{className:"card-info ".concat(e.card.empty||e.queued.includes(e.card)?"transparent":"")},e.count>1||e.supply||e.queued.includes(e.card)?r.a.createElement("p",{onClick:function(a){if(e.live&&!e.card.empty){var t=e.limit-e.queued.length,c=t>e.count?e.count:t;e.onClick(e.card,c),a.stopPropagation()}},className:"card-stack".concat(e.live&&"Action"!==e.card.type&&e.stacked?"-live":"")},e.card.empty?0:e.count):"",r.a.createElement("div",{className:"card ".concat(e.card.type," ").concat("Curse"===e.card.name?"curse":""," ").concat(e.live&&!e.card.empty?"live":""),onClick:function(){e.live&&!e.card.empty&&e.onClick(e.card,1,!!e.supply)},onMouseOver:function(){s(!0)},onMouseOut:function(){s(!1)}},r.a.createElement("p",{className:"card-top"},e.card.name),r.a.createElement("div",{className:"card-btm"},r.a.createElement("p",{className:"card-side"},e.card.cost),r.a.createElement("p",null,e.card.type),r.a.createElement("p",{className:"card-side"},"\xa0")),r.a.createElement("div",{className:"full-card-wrapper ".concat(e.stacked?"lower-card":"")},r.a.createElement("div",{className:"full-card ".concat(e.card.type," ").concat(c&&l?"":"hidden"," ").concat(e.live?"full-card-live":""," ").concat("Curse"===e.card.name?"curse":"")},r.a.createElement("div",{className:"card-top"},r.a.createElement("p",null,e.card.name),r.a.createElement("div",{className:"".concat("Action"===e.card.type?"action":"card","-image"),style:{backgroundImage:"url(".concat(e.card.path,")")}}),"Action"===e.card.type?r.a.createElement("div",{className:"card-instructions"},r.a.createElement("div",{className:"perks"},["cards","actions","buys","treasure"].map((function(a){var t="treasure"===a?r.a.createElement("span",{className:"coin"},e.card[a]):e.card[a]>1?v(a):v(a).slice(0,-1);return e.card[a]&&!isNaN(e.card[a])&&e.card.hidden!==a?r.a.createElement("p",{key:a},"+",r.a.createElement("span",null,"treasure"!==a?e.card[a]:""," ",t)):""}))),r.a.createElement("div",{className:"instructions"},function(){var a=e.card.instructions?e.card.instructions:"";if(a.includes("coin-")){var t=(a=a.split("coin-"))[1].length>1?a[1].split(" "):[a[1]],c=a[0],n=t.shift();t=t.length>0?t.join(" "):"",a=r.a.createElement("div",null,c,r.a.createElement("span",{className:"coin"},n)," ",t)}return a}())):""),r.a.createElement("div",{className:"card-btm"},r.a.createElement("p",{className:"card-side"},e.card.cost),r.a.createElement("p",null,e.card.type),r.a.createElement("p",{className:"card-side"},"\xa0"))))))},M=function(e){return function(a,t){var c=0;return a[e]>t[e]?c=1:a[e]<t[e]&&(c=-1),c}},P=function(e){var a=[e.cards],t=1,c=[[],[],[]];if(e.sort){a[0].sort(M("name")),a[0].sort(M("type"));var n=a[0].filter((function(e){return"Action"===e.type})).sort(M("cost")),s=a[0].filter((function(e){return"Treasure"===e.type})).sort(M("cost")),o=a[0].filter((function(e){return"Victory"===e.type})).sort(M("cost"));a=e.supply?[s,o,n]:[n,s,o]}a.forEach((function(a,n){a.forEach((function(s,o){var i=e.phase===s.type&&!e.supply||"Buy"===e.phase&&"Treasure"===s.type&&!e.supply||("Buy"===e.phase||"supply"===e.phase)&&e.coin>=s.cost&&e.supply||e.discardTrashState;if(a[o+1]&&a[o+1].name===s.name)t++;else{var l=e.cardQueue?e.cardQueue:[],d=Number.MAX_SAFE_INTEGER;if(e.discardTrashState&&!isNaN(e.discardTrashState.amount)&&(d=parseInt(e.discardTrashState.amount)),l.length>0){var u=0;l.forEach((function(e){e.name===s.name&&(u+=1)})),i=(t-=u)>0&&l.length<d}e.restriction&&(i=i&&(e.restriction===s.type||e.restriction===s.subType)),e.actionSupply&&(i=i&&e.supply),c[n].push(r.a.createElement("div",{key:"card".concat(n).concat(o),className:"inline"},r.a.createElement(A,{altKey:e.altKey,card:s,live:!!e.live||i,count:t,stacked:e.stacked,onClick:e.onClick,supply:e.supply,queued:l,limit:d}))),t=1}}))}));var i=c[0].concat(c[1]).concat(c[2]),l=e.title?r.a.createElement("p",{className:"red top-spaced"},e.title," (",e.cards.length,")"):"";return e.stacked?c.map((function(e,a){return r.a.createElement("div",{key:"stack".concat(a),className:"stack"},e)})):e.supply?c.map((function(e,a){return r.a.createElement("div",{key:"supply".concat(a),className:"supply"},e)})):r.a.createElement("div",null,l,i)},B=function(e){return r.a.createElement("div",null,r.a.createElement(P,{altKey:e.altKey,onClick:e.accept,cards:e.cards,live:e.live,title:e.live?"You may play":"To ".concat(e.buttonText)}),r.a.createElement("div",{className:"game-button start-button live",onClick:e.decline},v(e.buttonText)))},Q=function(e,a){return[a.concat(O(e,[{name:"Buy Phase",end:"enters"}])),"Buy",0]},V=function(e){var a=document.getElementById("log-sticker");return Object(n.useEffect)((function(){a&&a.scrollIntoView()}),[e.logs,a]),r.a.createElement("div",{className:"logs"},r.a.createElement("p",{className:"log-title"},"Log"),r.a.createElement("div",{className:"breakline"}),r.a.createElement("div",{className:"log-readout"},e.logs.length>1?e.logs:r.a.createElement("div",{className:"spacer"}),r.a.createElement("div",{id:"log-sticker"})))},D=function(e){return r.a.createElement("div",{className:"info"},r.a.createElement("span",{className:"hidden"},"VP ",r.a.createElement("span",{className:"red"},e.victoryPoints)," |\xa0"),r.a.createElement("span",null,"Action ",r.a.createElement("span",{className:"red"},e.actions)," |\xa0"),r.a.createElement("span",null,"Buys ",r.a.createElement("span",{className:"red"},e.buys)," |\xa0"),r.a.createElement("span",null,"Coin ",r.a.createElement("span",{className:"coin"},e.treasure-e.bought)," "))},G=function(e){return r.a.createElement("div",{className:"trash game-button".concat(e.trash.length>0?" active":""),onClick:function(){e.trash.length>0&&(e.setModalContent([e.trash,"Trash"]),e.setShowModal(!0))}},"Trash (",e.trash.length,")")},I=function(e){return e.filter((function(e){return"Treasure"===e.type})).length},K=function(e){var a=e.discardTrashState&&("up-to"===e.discardTrashState.modifier||"any"===e.discardTrashState.amount),t=e.discardTrashState&&e.discardTrashState.amount===e.discardTrashQueue.length;return r.a.createElement("div",{className:"button-display"},r.a.createElement("div",null,r.a.createElement("div",{className:"game-button red"},e.phase?"Your Turn - ".concat(e.phase," Phase"):"P2's Turn"),r.a.createElement("p",{className:"instructions red"},function(e,a,t,c){var n="";if(t){var r=t.modifier?"".concat(t.modifier.split("-").join(" ")," "):"",s=t.amount&&isNaN(t.amount)?"(s)":t.amount>1?"s":"";n="Select ".concat(r).concat(t.amount," card").concat(s).concat(c?"":" to ".concat(t.type))}else n=c?"Choose a Card":"Buy"===e?"Choose Cards to Buy (".concat(a,")"):"Choose Actions to play";return n}(e.phase,e.buys,e.discardTrashState,e.actionSupply),"\xa0"),e.actionSupply?"":r.a.createElement("div",null,r.a.createElement("div",{className:e.discardTrashState||!e.phase?"hidden":I(e.hand)>0&&"Buy"===e.phase?"game-button live":"button-space",onClick:e.playAllTreasure},I(e.hand)>0&&"Buy"===e.phase?"Play All Treasure (".concat(I(e.hand),")"):" "),r.a.createElement("div",{className:"game-button ".concat(e.discardTrashState?a||t?"":"not-":"","live").concat(e.discardTrashState||!e.phase?"":" top-spaced"),onClick:e.discardTrashState?a||t?e.discardTrashCards:function(){}:e.nextPhase},e.discardTrashState?"Confirm Card".concat(isNaN(e.discardTrashState.amount)||e.discardTrashState.amount>1?"s":""," to ").concat(e.discardTrashState.type," (").concat(e.discardTrashQueue.length,")"):e.phase?"End ".concat(e.phase," Phase"):"Start Turn"),r.a.createElement("div",{className:"game-button live top-spaced ".concat(e.discardTrashState&&e.discardTrashQueue.length>0?"":" hidden"),onClick:function(){e.setDiscardTrashQueue([])}},"Choose different cards"))),r.a.createElement("div",null,r.a.createElement("div",{className:"breakline"}),r.a.createElement("div",{className:"deck"},r.a.createElement("p",null,"Deck (",e.deck.length,")")),r.a.createElement("div",{className:"deck ".concat(e.discard.length>0?"active":""),onClick:function(){e.discard.length>0&&(e.setModalContent([e.discard,"Discard"]),e.setShowModal(!0))}},r.a.createElement("p",null,"Discard (",e.discard.length,")"))))},L=function(e){return r.a.createElement("div",{style:{display:e.show?"flex":"none"},className:"modal-bg",onClick:function(){return e.setShow(!1)}},r.a.createElement("div",{className:"modal-box",onClick:function(e){return e.stopPropagation()}},r.a.createElement("div",{className:"modal-top-row"},e.close?r.a.createElement("div",{className:"x-close-button",onClick:function(){return e.setShow(!1)}},"x"):""),r.a.createElement("div",{className:"modal-content"},e.children)))},R=function(e){return r.a.createElement(L,{close:!0,show:e.showModal,setShow:e.setShowModal,children:r.a.createElement(P,{altKey:e.altKey,cards:e.modalContent[0],title:e.modalContent[1]})})},W=function(e){return r.a.createElement("div",null,r.a.createElement("h2",{className:"title"},e.phaseTitle),e.start?r.a.createElement("h1",null,"Dominion"):r.a.createElement("p",null,e.victory," Victory Points!"),r.a.createElement("div",{className:"game-button start-button live",onClick:e.onClick},e.button))};t(55);var F=function(){var e=Object(n.useState)(),a=Object(d.a)(e,2),t=a[0],c=a[1],s=Object(n.useState)(!1),o=Object(d.a)(s,2),u=o[0],m=o[1],h=Object(n.useState)(!1),v=Object(d.a)(h,2),b=v[0],j=v[1],A=Object(n.useState)([]),M=Object(d.a)(A,2),I=M[0],F=M[1],_=Object(n.useState)([[]]),Y=Object(d.a)(_,2),q=Y[0],H=Y[1],J=Object(n.useState)(!1),U=Object(d.a)(J,2),X=U[0],$=U[1],z=Object(n.useState)(!1),Z=Object(d.a)(z,2),ee=Z[0],ae=Z[1],te=Object(n.useState)([]),ce=Object(d.a)(te,2),ne=ce[0],re=ce[1],se=Object(n.useState)({turn:1,player:1,turnPlayer:1}),oe=Object(d.a)(se,2),ie=oe[0],le=oe[1],de=Object(n.useState)([]),ue=Object(d.a)(de,2),pe=ue[0],me=ue[1],he=Object(n.useState)([]),ye=Object(d.a)(he,2),fe=ye[0],ge=ye[1],ve=Object(n.useState)([]),be=Object(d.a)(ve,2),je=be[0],Ee=be[1],Oe=Object(n.useState)([]),Te=Object(d.a)(Oe,2),Se=Te[0],ke=Te[1],Ne=Object(n.useState)([]),Ce=Object(d.a)(Ne,2),xe=Ce[0],we=Ce[1],Ae=Object(n.useState)([]),Me=Object(d.a)(Ae,2),Pe=Me[0],Be=Me[1],Qe=Object(n.useState)(0),Ve=Object(d.a)(Qe,2),De=Ve[0],Ge=Ve[1],Ie=Object(n.useState)(0),Ke=Object(d.a)(Ie,2),Le=Ke[0],Re=Ke[1],We=Object(n.useState)(0),Fe=Object(d.a)(We,2),_e=Fe[0],Ye=Fe[1],qe=Object(n.useState)(0),He=Object(d.a)(qe,2),Je=He[0],Ue=He[1],Xe=Object(n.useState)(),$e=Object(d.a)(Xe,2),ze=$e[0],Ze=$e[1],ea=Object(n.useState)(),aa=Object(d.a)(ea,2),ta=aa[0],ca=aa[1],na=function(){var e=T(function(){var e=[];return y.forEach((function(a){for(var t=0;t<("treasure"===a?7:3);t++)e.push(f()[a][0])})),e}());ca(S(e,"victory")),ge(e.splice(0,5)),me(e),Be(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],a=y.concat("action"),t=[],c=function(a){f(e)[a].forEach((function(e,c){for(var n="treasure"===a?20*(3-c):"action"===a||"Curse"===e.name?10:8,r=0;r<n;r++)t.push(e)}))};return a.forEach(c),t}(p)),ke([]),Ee([]),re([]),we([]),ia(null),c(null),Ze(0),Re(0),Ue(0)},ra=Object(n.useState)(r.a.createElement(W,{onClick:na,phaseTitle:"Let's Play",start:!0,button:"Start Game"})),sa=Object(d.a)(ra,2),oa=sa[0],ia=sa[1],la={gameState:ie,hand:Object(l.a)(fe),deck:Object(l.a)(pe),discard:Object(l.a)(Se),trash:Object(l.a)(xe),inPlay:Object(l.a)(je),logs:Object(l.a)(ne),supply:Object(l.a)(Pe),discardTrashQueue:Object(l.a)(I),discardTrashState:Object(i.a)({},b),actions:_e,buys:Je,treasure:Le,phase:t},da=function(e,a,c){la.treasure=S(je,"treasure");var n=t===e.type?1:a;switch(t){case"Action":if(e.type===t){var s,o=[];la.logs=la.logs.concat(O(ie,[e])),la.actions=la.actions-1;var u=w(e,n,fe,je),p=Object(d.a)(u,3);if(la.hand=p[0],la.inPlay=p[1],s=p[2],la.treasure+=N(s),e.actions&&(la.actions+=e.actions),e.buys&&(la.buys+=e.buys),e.cards){var m=x(e.cards,la.deck,la.discard),h=Object(d.a)(m,3);o=h[0],la.deck=h[1],la.discard=h[2],la.hand=la.hand.concat(o)}var y=!!e.discardTrash&&function(e){var a=e.discardTrash.split(" "),t=a[1],c="";return t.includes("|")&&(c=(t=t.split("|"))[1],t=t[0]),t=isNaN(t)?t:parseInt(t),{card:e,type:a[0],amount:t,modifier:c,next:a[2]?[a[2],e[a[2]]]:[],restriction:a[3]}}(e),f=!k(la.hand);if(y)if(y.next&&"auto"===y.next[0]){var v=function(e,a,t,c,n){if(t.modifier&&"up-to"!==t.modifier)switch(t.modifier){case"deck":var s=e.deck.split(" ");s={index:s[0],next:s[1],type:s[2]};var o=a.deck.splice(s.index,t.amount),i=function(){c(null),a.discard=a.discard.concat(o)};if("modal"===s.next){var l=s.type===o[0].type;c(r.a.createElement(B,{cards:o,accept:function(){c(null),n(!1)},decline:i,buttonText:t.type,live:l}))}else i()}else{var d="discards",u=a.hand.findIndex((function(e){return e.name===t.restriction}));"discard"===t.type?a.discard=a.discard.concat(a.hand.splice(u,t.amount)):(a.trash=a.trash.concat(a.hand.splice(u,t.amount)),d="trashes"),-1===u?(a.treasure=0,a.logs.pop()):a.logs=a.logs.concat(E(a.gameState,[{name:"Card"}],d,t.amount,!0))}var p=!k(a.hand);return[a,p]}(e,la,y,ia,j),b=Object(d.a)(v,2);la=b[0],f=b[1]}else f=!1,j(y);var T=!y||!(!y.next||"auto"!==y.next[0]);if((!la.actions||f)&&T){var C=Q(ie,la.logs),A=Object(d.a)(C,3);la.logs=A[0],la.phase=A[1],la.actions=A[2]}}else{var M=Q(ie,la.logs),P=Object(d.a)(M,3);la.logs=P[0],la.phase=P[1],la.actions=P[2]}break;case"Buy":var V=Je,D=ta;if(c){var G,I=w(e,1,Pe,la.discard),K=Object(d.a)(I,3);la.supply=K[0],la.discard=K[1],G=K[2];var L=la.supply.filter((function(a){return a.name===e.name})).length;if(D=e.victory?D+e.victory:D,!L&&(Ze(ze+1),G=Object(i.a)({},G[0],{empty:!0}),la.supply=la.supply.concat(G),"Province"===e.name||2===ze)){Be(la.supply),ia(r.a.createElement(W,{onClick:na,phaseTitle:"Game Over",victory:D,button:"Play Again"}));break}Be(la.supply),Ge(De+e.cost),V-=1,la.logs=la.logs.concat(O(ie,G,"buys"))}else if("Treasure"===e.type){var R,F=w(e,n,fe,je),_=Object(d.a)(F,3);la.hand=_[0],la.inPlay=_[1],R=_[2],la.treasure+=N(R),la.logs=la.logs.concat(O(ie,[e],null,a))}else V=0;if(V<1||Le-De-e.cost<1&&c){var Y=Object(l.a)(pe);la=Object(i.a)({},la,{inPlay:[],discard:la.discard.concat(je).concat(fe),hand:Y.splice(0,5)}),V=0;var q=x(5,la.deck,la.discard),H=Object(d.a)(q,3);la.hand=H[0],la.deck=H[1],la.discard=H[2],la=Object(i.a)({},la,{actions:0,treasure:0,phase:null,logs:la.logs.concat(O(ie,[{name:"turn",end:"ends"}]))}),Ge(0),le(Object(i.a)({},ie,{turn:ie.turn+1}))}la.buys=V,ca(D);break;default:var J=1===ie.turn&&1===ie.turnPlayer?[]:[r.a.createElement("div",{key:"log".concat(Object(g.a)().slice(0,8)),className:"spacer"})];if(la.logs=la.logs.concat(J.concat(O(ie))),la.buys=1,k(fe))la.actions=1,la.phase="Action";else{var U=Q(ie,la.logs),X=Object(d.a)(U,2);la.logs=X[0],la.phase=X[1]}}ua(la)},ua=function(e){ge(e.hand),me(e.deck),ke(e.discard),we(e.trash),Ee(e.inPlay),re(e.logs),Be(e.supply),Ye(e.actions),Ue(e.buys),Re(e.treasure),c(e.phase)};return window.onkeydown=function(e){18===e.keyCode?$(!0):27===e.keyCode?m(!1):13===e.keyCode&&oa&&na()},window.onkeyup=function(e){18===e.keyCode&&$(!1)},r.a.createElement("div",{className:"App"},r.a.createElement("div",{className:"supply-market"},r.a.createElement(P,{coin:Le-De,phase:ee?"supply":t,onClick:ee?function(e){la.logs=la.logs.concat(E(ie,[e],"gains",1,!0));var a=w(e,1,Pe,Se),t=Object(d.a)(a,2);la.supply=t[0],la.discard=t[1],la.treasure=ee.treasure,la=C(la),ua(la),F(la.discardTrashQueue),j(la.discardTrashState),ae(!1)}:da,actionSupply:ee,sort:!0,supply:!0,altKey:X,cards:Pe,restriction:b?b.restriction:void 0})),r.a.createElement(V,{logs:ne}),r.a.createElement(D,{victoryPoints:ta,actions:_e,buys:Je,treasure:Le,bought:De}),r.a.createElement(G,{trash:xe,setModalContent:H,setShowModal:m}),r.a.createElement("div",{className:"in-play"},r.a.createElement(P,{sort:!0,altKey:X,cards:je})),r.a.createElement("div",{className:"combo-mat"}),r.a.createElement(K,{buys:Je,actionSupply:ee,hand:fe,phase:t,discardTrashState:b,discardTrashQueue:I,setDiscardTrashQueue:F,deck:pe,setModalContent:H,setShowModal:m,discard:Se,playAllTreasure:function(){var e=fe.filter((function(e){return"Treasure"===e.type})),a=Object(l.a)(je).concat(e),t=Object(l.a)(ne),c=e.filter((function(e,a,t){return t.indexOf(e)===a})),n=fe.filter((function(e){return"Treasure"!==e.type}));c.forEach((function(a){t=t.concat(O(ie,e.filter((function(e){return a.name===e.name}))))})),Re(N(a)),Ee(a),ge(n),re(t)},discardTrashCards:function(){var e="discards";I.forEach((function(e){la.hand.splice(la.hand.findIndex((function(a){return a===e})),1)})),"discard"===la.discardTrashState.type?(la.discard=la.discard.concat(I),ke(la.discard)):(e="trashes",la.trash=la.trash.concat(I),we(la.trash)),la.logs=la.logs.concat(E(ie,[{name:"Card"}],e,I.length,!0)),la=la.discardTrashState.next.length>0?function(e,a){var t=e.discardTrashState.next[0],c=e.treasure;switch(t){case"draw":var n,r=isNaN(e.discardTrashState.next[1])?e.discardTrashQueue.length:e.discardTrashState.next[1],s=x(r,e.deck,e.discard),o=Object(d.a)(s,3);n=o[0],e.deck=o[1],e.discard=o[2],e=Object(i.a)({},e,{hand:e.hand.concat(n),logs:e.logs.concat(E(e.gameState,[{name:"Card"}],"draws",e.discardTrashQueue.length,!0))}),e=C(e);break;case"supply":var l=e.discardTrashState.card.supply.split(" ");c="discardTrash"===l[0]?e.discardTrashQueue[0].cost+parseInt(l[1]):l[0],a({treasure:e.treasure,count:e.discardTrashState.amount,restriction:l[2]}),e.discardTrashQueue=[]}return Object(i.a)({},e,{treasure:c})}(la,ae):C(la),ua(la),F(la.discardTrashQueue),j(la.discardTrashState)},startGame:na,nextPhase:da}),r.a.createElement("div",{className:"hand"},r.a.createElement(P,{altKey:X,stacked:!0,sort:!0,cards:fe,phase:t,onClick:b?function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,t=w(e,a,fe,I);F(t[1])}:da,discardTrashState:b,actionSupply:ee,restriction:b?b.restriction:void 0,cardQueue:I})),r.a.createElement(L,{show:!!oa,setShow:function(){},children:oa}),r.a.createElement(R,{showModal:u,setShowModal:m,altKey:X,modalContent:q}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(F,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}],[[9,1,2]]]);
//# sourceMappingURL=main.7b71ec99.chunk.js.map